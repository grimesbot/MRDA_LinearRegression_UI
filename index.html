<!DOCTYPE html>
<html lang="en" data-bs-theme>
<head>
    <meta charset="UTF-8">
    <title>MRDA Game Points UI</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.2/css/dataTables.dataTables.css" />
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div class="container">
        <h1 style="text-align: center">MRDA Rankings using Rankings Points by Linear Regression</h1>
        <div class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="date" class="col-form-label">Rankings Period:</label>
            </div>
            <div class="col-auto">
                <select name="date" id="date" style="display: block; margin: 0 auto;"></select>
            </div>
            <div class="col-auto">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#gamesModal">
                    Games
                </button>
            </div>
        </div>
    </div>

    <div id ="rankingsChartContainer" class="container-xxl" >
        <canvas id="rankingsChart"></canvas>
    </div>
    
    <div id ="mrdaRankingPointsContainer" class="container-xxl" >
        <table id="mrdaRankingPoints" class="display" width="100%"></table>
    </div>

    <div id="teamDetailModal" class="modal fade" tabindex="-1" aria-labelledby="teamDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-fullscreen-xl-down">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="teamDetailModalLabel"><span id="teamName"></span></h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h5 class="text-center">Current Ranking Points by Linear Regression: <span style="font-weight: bold;" id="teamAverageRankingPoints"></span></h5>
                    <canvas id="teamChart"></canvas>
                    <table id="teamGameHistory" class="display" width="100%">
                    <thead>
                        <tr>
                            <th width="20%">Date</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    </table>    
                </div>
            </div>
        </div>
    </div>

    <div>
        Average difference between expected & actual score ratios when both teams have >=5 previous games:<br />
        <span id="diffAvg" style="font-weight: bold;"></span><br />
        Excluding games with actual score ratio beyond 4:1 cap<br />
        <span id="diffUnderCapAvg" style="font-weight: bold;"></span>
    </div>

    <div class="modal fade" id="gamesModal" tabindex="-1" aria-labelledby="gamesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="gamesModalLabel">MRDA Games</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div id="games" class="modal-body">
                    <table id="apiGames" class="display" width="100%"></table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/2.3.2/js/dataTables.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <script src="linear_regression_rankings.js"></script>    
    <script src="teamInfo.js"></script>
    <script src="gameHistory.js"></script>
    <script src="apiTeamsGames.js"></script>    
    <script src="mrdaLinearRegressionSystem.js"></script>
    <script src="main.js"></script>
</body>
</html>